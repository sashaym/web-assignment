<!DOCTYPE html>
<html>
<html lang="en">

<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="styles_homepage.css">
	<title>Pawfect Pairs</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
	<script type="text/javascript"
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
	</script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<div class ="bar">
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>                        
		  </button>
		  <a class="navbar-brand" href="#">Pawfect Pairs</a>
		</div>
		<div class="collapse navbar-collapse" id="myNavbar">
		  <ul class="nav navbar-nav">
			<li><button class="btn navbar-btn" id="park-button">The Park</button></li>
			<li><button class="btn navbar-btn" id="matches-button">My Matches</button></li>
			<li><button class="btn navbar-btn" id="chats-button">My Conversations</button></li>
		  </ul>
		  <ul class="nav navbar-nav navbar-right">
			<li><button class="btn navbar-btn" id="logout"><span class="glyphicon glyphicon-log-out" ></span> Log out</button></li>
		  </ul>
		</div>
	  </div>
	</nav>
	</div>
	
	
	<div class = "homepage">
		<div class = container>
		
			<div class = row>
				<div class="col-sm-8">
					<h1 id = "header1">meet the woof to your wuff with the number one doggo dating site</h1>
					<img src="pawfectpairslogo.png" alt="Pawfect Pairs Logo" style="width:45%;height:45%;" class="image">
					
					<div class="input">	
						<form id="login_form">
							<input type="text" placeholder="Enter Username" name="uname" required>
							<input type="password" placeholder="Enter Pawsword" name="psw" required>					
							<button class="button1">log in</button>
						</form>	
					</div>
					
					<div class="signup">
						<div id = "error"></div>
						<button class="button2" id = "snp" >sign up</button>		
					</div>
					
				</div>
				<div class="col-sm-4" id = "reviews">
					<div id = "rev1">A presidential service.<br> - <i>Obama</i></div>
					<div id = "rev1">This website is like a prayer.<br> - <i>Madonna</i></div>
					<div id = "rev1">I've tried so many dating apps but this one takes the cake .... mmmm cake.... <br> - <i> Scooby Doo</i></div>
				</div>
			</div>						
		</div>	
	</div>
	
	
	<div class = "signup_page">
		<h1>welcome to Pawfect Pairs!</h1>

		<form id="makeaccount">
			First name:<br>
			<input type="text" id="fname1" required><br>
			
			Surname:<br>
			<input type="text" id="sname1" required><br>
			
			Username:<br>
			<input type="text" id="uname1" required><br>
			
			Password:<br>
			<input type="text" id="psw1" required><br>
			
			<button class="button3" >get woofing!</button>
		</form>
	</div>
	
	
	<div class="my-chats">
	
		<h1>Your conversations</h1>
		<p>Your details are:</p>
		<h2 id = "details"></h2>
	</div>
	
	
	<div class = "login_home">
		<h1>welcome back, </h1>
		<h2 id = "welcome_back"></h2>
	</div>
	
	<div class = "park">
		<h1>welcome to the park </h1>
		
		<div class = container-fluid id = "parkContainer">	
			<div class = row>
				<div class="col-sm-4" id = "dog1profile">
					Name: <div id ="dog1"></div>
					Owner: <div id ="dog1owner"></div>
					<button onclick=sniffFunction(1) id = "s1">Sniff their butt!</button>
				</div>
				<div class="col-sm-4" id = "dog2profile">
					Name: <div id ="dog2"></div>
					Owner: <div id ="dog2owner"></div>
					<button onclick=sniffFunction(2) id = "s2">Sniff their butt!</button>
				</div>
				<div class="col-sm-4" id = "dog3profile">
					Name: <div id ="dog3"></div>
					Owner: <div id ="dog3owner"></div>
					<button onclick=sniffFunction(3) id = "s3">Sniff their butt!</button>
				</div>
			</div>
			<div class = row>
				<div class="col-sm-4" id = "dog4profile">
					Name: <div id ="dog4"></div>
					Owner: <div id ="dog4owner"></div>
					<button onclick=sniffFunction(4) id = "s4">Sniff their butt!</button>
				</div>
				<div class="col-sm-4" id = "dog5profile">
					Name: <div id ="dog5"></div>
					Owner: <div id ="dog5owner"></div>
					<button onclick=sniffFunction(5) id = "s5">Sniff their butt!</button>
				</div>
				<div class="col-sm-4" id = "dog6profile">
					Name: <div id ="dog6"></div>
					Owner: <div id ="dog6owner"></div>
					<button onclick=sniffFunction(6) id = "s6">Sniff their butt!</button>
				</div>
			</div>
			<div class = row>
				<div class="col-sm-4" id = "dog7profile">
					Name: <div id ="dog7"></div>
					Owner: <div id ="dog7owner"></div>
					<button onclick=sniffFunction(7) id = "s7">Sniff their butt!</button>
				</div>
				<div class="col-sm-4" id = "dog8profile">
					Name: <div id ="dog8"></div>
					Owner: <div id ="dog8owner"></div>
					<button onclick=sniffFunction(8) id = "s8">Sniff their butt!</button>
				</div>
				<div class="col-sm-4" id = "dog9profile">
					Name: <div id ="dog9"></div>
					Owner: x`<div id ="dog9owner"></div>
					<button onclick=sniffFunction(9) id = "s9">Sniff their butt!</button>
				</div>
			</div>
		</div>
		<h2 id ="trial"></h2>
	</div>
	
	<div class = "matches">
		<h1>Your matches </h1>
		<div class = container-fluid id = "matchesContainer">	
			<div class = row>
				<div class="col-sm-4" id = "match1">
					You and <div id = "m1"></div> have sniffed each other's butts!
					<button onClick=woofFunction(1) id = "w1">Send a woof!</button>
				</div>
				<div class="col-sm-4" id = "match2">
					You and <div id = "m2"></div> have sniffed each other's butts!
					<button onClick=woofFunction(2) id = "w2">Send a woof!</button>
				</div>
				<div class="col-sm-4" id = "match3">
					You and <div id = "m3"></div> have sniffed each other's butts!
					<button onClick=woofFunction(3) id = "w3">Send a woof!</button>
				</div>
			</div>
			<div class = row>
				<div class="col-sm-4" id = "sniffBack1">
					<div id = "sniffedYou1"></div> has sniffed your butt!
					<button onclick=sniffBackFunction(1) id = "sb1">Sniff them back!</button>
				</div>
				<div class="col-sm-4" id = "sniffBack2">
					<div id = "sniffedYou2"></div> has sniffed your butt!
					<button onclick=sniffBackFunction(2) id = "sb2">Sniff them back!</button>
				</div>
				<div class="col-sm-4" id = "sniffBack3">
					<div id = "sniffedYou3"></div> has sniffed your butt!
					<button onclick=sniffBackFunction(3) id = "sb3">Sniff them back!</button>
				</div>
			</div>
		</div>	
	</div>

	<script>
			var current_account = "";
			
			//MAke a hide all pages button ???
			function hideAll(){
				$(".homepage").hide();
				$(".signup_page").hide();
				$(".my-chats").hide();
				$(".login_home").hide();
				$(".matches").hide();
				$(".park").hide();
			}
			
			$(".bar").hide();
			hideAll();
			$(".homepage").show();
			

			$("#snp").click(function(){
				//alert("signup");
				hideAll();
				$(".signup_page").show();
			});
			
			//PARK
			$("#park-button").click(function(){
				hideAll();
				$(".park").show();
				for (a = 1; a < 10; a++){
					$("#dog"+a+"profile").hide();
				}
				
				$.get("http://pawfect-pairs1.herokuapp.com/park", function(data){
					dogNumber = data.length;
					var dogs = JSON.stringify(data);				
					for (i = 0; i < data.length; i++){
						a = i+1
						var idName = "#dog"+a;
						//if (data[i].name !== ){} --- make it so you cannot display your own account						
						$(idName+"profile").show();
						$(idName).html(data[i].name);
						var ownerName = "#dog"+a+"owner";
						$(ownerName).html(data[i].owner);
					}					
				});
			});
			
			//SNIFF A BUTT			
			function sniffFunction(number){
				$("#s"+number).replaceWith('<div id = "sniffed">You have sniffed their butt!</div>');
				//change button to 'sniffed!' and make it not do anything if clicked
				var id = $('#dog'+number).prop('innerHTML');
				var info = {"sniffer":current_account, "sniffed":id};
				$.post("http://pawfect-pairs1.herokuapp.com/sniff", info, function(data){
						//									
				});
			}
			
			//SEND A WOOF 
			function woofFunction(number){
				//change button to 'woofed!' and make it not do anything if clicked
				var id = $('#dog'+number+"owner").prop('innerHTML');
				var info = {"woofer":current_account, "woofed":id};
				$.post("http://pawfect-pairs1.herokuapp.com/woof", {"dogNumber":number}, function(data){
					alert(data);				
				});
			}
		
					
			$("#chats-button").click(function(){
				hideAll();
				$(".my-chats").show();
			});
			
			//MATCHES PAGE
			$("#matches-button").click(function(){
				hideAll();
				$(".matches").show();
				for (a = 1; a < 4; a++){
					$("#match"+a).hide();
					$("#sniffBack"+a).hide();
				}
				info = {"current":current_account};
				$.get("http://pawfect-pairs1.herokuapp.com/matches", info, function(data){
					var mutualSniffs = data[0];
					for (i = 0; i < data[0].length; i++){						
						a = i+1;
						//alert(a);
						$("#match"+a).show();
						$("#m"+a).html(mutualSniffs[i]);
					}
					var sniffedYou = data[1];
					for (i = 0; i < data[1].length; i++){						
						a = i+1;
						//alert(a);
						$("#sniffBack"+a).show();
						$("#sniffedYou"+a).html(sniffedYou[i].sniffer);
					}
				});
			});
			
			$("#logout").click(function(){
				hideAll();
				$(".bar").hide();
				$(".homepage").show();
			});
			
			//LOGIN
			$("#login_form").on("submit",function(){
				var info = $("#login_form").serialize();
				$.get("http://pawfect-pairs1.herokuapp.com/login", info, function(data){
					if(data === false){
						$("#error").text("Either the username or password is incorrect");
					}
					else {
						hideAll();
						$(".login_home").show();
						$(".bar").show();
						$("#welcome_back").html(data);
						current_account = data;
					}
				});
				return false;
			});
			
			//MAKE ACCOUNT
			$("#makeaccount").on("submit", function(){
				hideAll();
				$(".park").show();
				$(".bar").show();
				var info = $("#makeaccount").serialize();
				$.post("http://pawfect-pairs1.herokuapp.com/people", {
							forename: $("#fname1").val(),
							surname: $("#sname1").val(),
							username: $("#uname1").val(),
							psw: $("#psw1").val(),
							access_token: "concertina"
						},
					function(data){
						//$("#details").html(data);  -- sort this out 
						//current_account = data;
					});
				return false;	
			});
			
	</script>
</body>
</html>
